<html>

<head>
    <style>
        iframe {
            border: 0;
            height: 745px;
            position: relative;
            width: 1100px;
        }

        .first {
            top: 20px;
        }

        .last {
            top: 25px;
        }
    </style>
</head>

<body>
    <iframe class="first" scrolling="no" src="page.html"></iframe>
    <iframe class="last" name="rotate" id="rot" scrolling="no" src="page.html"></iframe>
</body>

<script>

window.onload = () => {
    console.log('loaded');
    const frameBody = frames[1].document.querySelector('body');
    frameBody.style.transform = 'rotate(180deg)';
    frameBody.style.position = 'relative';
    frameBody.style.top = '-130px';

    // !!! Don't change the formatting of those lines, they are replaced by the print.js script
    const first = '29'
    const second = '30'

    const secondLast = '31'
    const last = '32'

    const lastPage = false
    // !!!

    const upperLeftPage = frames[0].document.querySelector('.left.page')
    const upperRightPage = frames[0].document.querySelector('.right.page')
    const upperSeam = frames[0].document.querySelector('.seam')

    const lowerLeftPage = frames[1].document.querySelector('.left.page')
    const lowerRightPage = frames[1].document.querySelector('.right.page')
    const lowerSeam = frames[1].document.querySelector('.seam')

    upperLeftPage.setAttribute('data-page-number', last)
    upperRightPage.setAttribute('data-page-number', first)

    lowerLeftPage.setAttribute('data-page-number', second)
    lowerRightPage.setAttribute('data-page-number', secondLast)

    if (first === '1') {
        upperRightPage.classList.remove('visible')
        upperSeam.classList.remove('visible')
    }

    if (lastPage) {
        lowerLeftPage.classList.remove('visible')
        lowerSeam.classList.remove('visible')
    }
}

</script>

</html>
